<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.fallsvc.mybatis.mapper.UserInfoMapperXML">
    <resultMap id="BaseMap" type="com.fallsvc.mybatis.model.UserInfo">
        <id property="id" column="id"></id>
        <result property="deleteFlag" column="delete_flag"></result>
        <result property="createTime" column="create_time"></result>
        <result property="updateTime" column="update_time"></result>
    </resultMap>

    <!--    <select id="selectAll" resultType="com.fallsvc.mybatis.model.UserInfo">-->
<!--&lt;!&ndash;            select * from user_info&ndash;&gt;-->
<!--&lt;!&ndash;        起别名&ndash;&gt;-->
<!--        select id,username,password,age,gender,phone,delete_flag as deleteFlag,create_time as createTime,update_time as updateTime from user_info-->

<!--    </select>-->

    <select id="selectAll" resultMap="BaseMap">
        select * from user_info
    </select>
<!--    <insert id="insertUser">-->
<!--        insert into user_info (username,password,age) VALUES (#{username},#{password},#{age})-->
<!--    </insert>-->
    <insert id="insertUser" useGeneratedKeys="true" keyProperty="id">
        insert into user_info (username,password,age) VALUES (#{userInfo.username},#{userInfo.password},#{userInfo.age})
    </insert>

    <update id="updateUser">
        update user_info set phone=#{phone} where id=#{id}
    </update>
    <delete id="deleteUser">
        delete from user_info where id=#{id}
    </delete>
    <insert id="insertUser2">
        insert into user_info
        <trim suffixOverrides="," prefix="(" suffix=")"> // suffixOverrides除后缀为,  prefix加前缀 suffix加后缀
        <if test="username!=null">
            username,
        </if>
        <if test="password!=null">
            password,
        </if>
        <if test="age!=null">
            age,
        </if>
        <if test="gender!=null">
            gender,
        </if>
        <if test="phone!=null">
            phone
        </if>
        </trim>
        values
        <trim suffixOverrides="," prefix="(" suffix=")">
        <if test="username!=null">
            #{username},
        </if>
        <if test="password!=null">
            #{password},
        </if>
        <if test="age!=null">
            #{age},
        </if>
        <if test="gender!=null">
        #{gender},
        </if>
        <if test="phone!=null">
            #{phone}
        </if>
        </trim>

    </insert>
</mapper>